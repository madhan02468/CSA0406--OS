#include <stdio.h>

struct emp {
    int id;
    char name[20];
    float salary;
};

int main() {
    FILE *fp;
    struct emp e;
    int ch, n;

    fp = fopen("emp.dat", "rb+");
    if (fp == NULL)
        fp = fopen("emp.dat", "wb+");

    while (1) {
        printf("\n1.Add  2.Display  3.Search  4.Exit\n");
        scanf("%d", &ch);

        if (ch == 1) {
            printf("ID Name Salary: ");
            scanf("%d %s %f", &e.id, e.name, &e.salary);
            fseek(fp, 0, SEEK_END);
            fwrite(&e, sizeof(e), 1, fp);
        }

        else if (ch == 2) {
            rewind(fp);
            while (fread(&e, sizeof(e), 1, fp))
                printf("\n%d %s %.2f", e.id, e.name, e.salary);
        }

        else if (ch == 3) {
            printf("Enter record number: ");
            scanf("%d", &n);
            fseek(fp, (n - 1) * sizeof(e), SEEK_SET);
            if (fread(&e, sizeof(e), 1, fp))
                printf("\n%d %s %.2f", e.id, e.name, e.salary);
            else
                printf("\nRecord not found");
        }

        else break;
    }

    fclose(fp);
    return 0;
}
